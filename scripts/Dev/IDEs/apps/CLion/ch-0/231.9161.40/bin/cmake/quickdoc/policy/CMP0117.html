<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CMP0117</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
    <style type="text/css">
      /* CLION CMAKE DOCUMENTATION CSS PLACEHOLDER */
    </style>
  </head>
  <body>
    <div class="document">

      <div class="documentwrapper">
          <div class="body">
            
              <section id="cmp0117">
<span id="policy:CMP0117"><!--f--></span><h1>CMP0117</h1>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.20.</span></p>
</div>
<p>MSVC RTTI flag <code class="docutils literal notranslate"><span class="pre">/GR</span></code> is not added to
<span class="target" id="index-0-variable:CMAKE_&lt;LANG&gt;_FLAGS"><!--f--></span><a class="reference internal" href="variable/CMAKE_LANG_FLAGS.html#variable:CMAKE_&lt;LANG&gt;_FLAGS" title="CMAKE_&lt;LANG&gt;_FLAGS"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS</span></code></a> by default.</p>
<p>When using MSVC-like compilers in CMake 3.19 and below, the RTTI flag
<code class="docutils literal notranslate"><span class="pre">/GR</span></code> is added to <span class="target" id="index-1-variable:CMAKE_&lt;LANG&gt;_FLAGS"><!--f--></span><a class="reference internal" href="variable/CMAKE_LANG_FLAGS.html#variable:CMAKE_&lt;LANG&gt;_FLAGS" title="CMAKE_&lt;LANG&gt;_FLAGS"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS</span></code></a> by
default.  This behavior is left from support for MSVC versions from Visual
Studio 2003 and below that did not enable RTTI by default.  It is no longer
necessary.  Furthermore, it is problematic for projects that want to change
to <code class="docutils literal notranslate"><span class="pre">/GR-</span></code> programmatically.  In particular, it requires string editing of
the <span class="target" id="index-2-variable:CMAKE_&lt;LANG&gt;_FLAGS"><!--f--></span><a class="reference internal" href="variable/CMAKE_LANG_FLAGS.html#variable:CMAKE_&lt;LANG&gt;_FLAGS" title="CMAKE_&lt;LANG&gt;_FLAGS"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS</span></code></a> variable with knowledge
of the CMake builtin default so it can be replaced.</p>
<p>CMake 3.20 and above prefer to leave out <code class="docutils literal notranslate"><span class="pre">/GR</span></code> from the value of
<span class="target" id="index-3-variable:CMAKE_&lt;LANG&gt;_FLAGS"><!--f--></span><a class="reference internal" href="variable/CMAKE_LANG_FLAGS.html#variable:CMAKE_&lt;LANG&gt;_FLAGS" title="CMAKE_&lt;LANG&gt;_FLAGS"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS</span></code></a> by default.</p>
<p>This policy provides compatibility with projects that have not been updated
to expect the lack of the <code class="docutils literal notranslate"><span class="pre">/GR</span></code> flag.  The policy setting takes effect as
of the first <span class="target" id="index-0-command:project"><!--f--></span><a class="reference internal" href="command/project.html#command:project" title="project"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">project()</span></code></a> or <span class="target" id="index-0-command:enable_language"><!--f--></span><a class="reference internal" href="command/enable_language.html#command:enable_language" title="enable_language"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">enable_language()</span></code></a> command that
initializes <span class="target" id="index-4-variable:CMAKE_&lt;LANG&gt;_FLAGS"><!--f--></span><a class="reference internal" href="variable/CMAKE_LANG_FLAGS.html#variable:CMAKE_&lt;LANG&gt;_FLAGS" title="CMAKE_&lt;LANG&gt;_FLAGS"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Once the policy has taken effect at the top of a project for a given
language, that choice must be used throughout the tree for that language.
In projects that have nested projects in subdirectories, be sure to
convert everything together.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">OLD</span></code> behavior for this policy is to place the MSVC <code class="docutils literal notranslate"><span class="pre">/GR</span></code> flag in the
default <span class="target" id="index-5-variable:CMAKE_&lt;LANG&gt;_FLAGS"><!--f--></span><a class="reference internal" href="variable/CMAKE_LANG_FLAGS.html#variable:CMAKE_&lt;LANG&gt;_FLAGS" title="CMAKE_&lt;LANG&gt;_FLAGS"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS</span></code></a> cache entry.  The
<code class="docutils literal notranslate"><span class="pre">NEW</span></code> behavior for this policy is to <em>not</em> place the MSVC <code class="docutils literal notranslate"><span class="pre">/GR</span></code> flag in
the default cache entry.</p>
<p>This policy was introduced in CMake version 3.20.  Use the
<span class="target" id="index-0-command:cmake_policy"><!--f--></span><a class="reference internal" href="command/cmake_policy.html#command:cmake_policy" title="cmake_policy"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">cmake_policy()</span></code></a> command to set it to <code class="docutils literal notranslate"><span class="pre">OLD</span></code> or <code class="docutils literal notranslate"><span class="pre">NEW</span></code> explicitly.
Unlike many policies, CMake version  does <em>not</em> warn
when this policy is not set and simply uses <code class="docutils literal notranslate"><span class="pre">OLD</span></code> behavior.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">OLD</span></code> behavior of a policy is
<span class="target" id="index-0-manual:cmake-policies(7)"><!--f--></span><a class="reference internal" href="https://cmake.org/cmake/help/v3.24/manual/cmake-policies.7.html#manual:cmake-policies(7)" title="cmake-policies(7)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">deprecated</span> <span class="pre">by</span> <span class="pre">definition</span></code></a>
and may be removed in a future version of CMake.</p>
</div>
</section>

            
          </div>
      </div>
    </div>
  </body>
</html>