<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>clang-tidy - abseil-duration-subtraction</title>
	/* CLION CLANG-TIDY DOCUMENTATION CSS PLACEHOLDER */
  </head>
  <body><div class="content"><section id="abseil-duration-subtraction">
<h1>abseil-duration-subtraction</h1>
<p>Checks for cases where subtraction should be performed in the
<code class="docutils literal notranslate"><span class="pre">absl::Duration</span></code> domain. When subtracting two values, and the first one is
known to be a conversion from <code class="docutils literal notranslate"><span class="pre">absl::Duration</span></code>, we can infer that the second
should also be interpreted as an <code class="docutils literal notranslate"><span class="pre">absl::Duration</span></code>, and make that inference
explicit.</p>
<p>Examples:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Original - Subtraction in the double domain</span>
<span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="n">absl</span><span class="o">::</span><span class="n">Duration</span><span class="w"> </span><span class="n">d</span><span class="p">;</span><span class="w"></span>
<span class="kt">double</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">absl</span><span class="o">::</span><span class="n">ToDoubleSeconds</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>

<span class="c1">// Suggestion - Subtraction in the absl::Duration domain instead</span>
<span class="kt">double</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">absl</span><span class="o">::</span><span class="n">ToDoubleSeconds</span><span class="p">(</span><span class="n">d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">absl</span><span class="o">::</span><span class="n">Seconds</span><span class="p">(</span><span class="n">x</span><span class="p">));</span><span class="w"></span>

<span class="c1">// Original - Subtraction of two Durations in the double domain</span>
<span class="n">absl</span><span class="o">::</span><span class="n">Duration</span><span class="w"> </span><span class="n">d1</span><span class="p">,</span><span class="w"> </span><span class="n">d2</span><span class="p">;</span><span class="w"></span>
<span class="kt">double</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">absl</span><span class="o">::</span><span class="n">ToDoubleSeconds</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">absl</span><span class="o">::</span><span class="n">ToDoubleSeconds</span><span class="p">(</span><span class="n">d2</span><span class="p">);</span><span class="w"></span>

<span class="c1">// Suggestion - Subtraction in the absl::Duration domain instead</span>
<span class="kt">double</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">absl</span><span class="o">::</span><span class="n">ToDoubleSeconds</span><span class="p">(</span><span class="n">d1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">d2</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Note: As with other <code class="docutils literal notranslate"><span class="pre">clang-tidy</span></code> checks, it is possible that multiple fixes
may overlap (as in the case of nested expressions), so not all occurrences can
be transformed in one run. In particular, this may occur for nested subtraction
expressions. Running <code class="docutils literal notranslate"><span class="pre">clang-tidy</span></code> multiple times will find and fix these
overlaps.</p>
</section>
</div></body>
</html>