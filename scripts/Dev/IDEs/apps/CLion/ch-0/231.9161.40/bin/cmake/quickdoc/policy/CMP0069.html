<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CMP0069</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css" />
    <style type="text/css">
      /* CLION CMAKE DOCUMENTATION CSS PLACEHOLDER */
    </style>
  </head>
  <body>
    <div class="document">

      <div class="documentwrapper">
          <div class="body">
            
              <section id="cmp0069">
<span id="policy:CMP0069"><!--f--></span><h1>CMP0069</h1>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.9.</span></p>
</div>
<p><span class="target" id="index-0-prop_tgt:INTERPROCEDURAL_OPTIMIZATION"><!--f--></span><a class="reference internal" href="prop_tgt/INTERPROCEDURAL_OPTIMIZATION.html#prop_tgt:INTERPROCEDURAL_OPTIMIZATION" title="INTERPROCEDURAL_OPTIMIZATION"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">INTERPROCEDURAL_OPTIMIZATION</span></code></a> is enforced when enabled.</p>
<p>CMake 3.9 and newer prefer to add IPO flags whenever the
<span class="target" id="index-1-prop_tgt:INTERPROCEDURAL_OPTIMIZATION"><!--f--></span><a class="reference internal" href="prop_tgt/INTERPROCEDURAL_OPTIMIZATION.html#prop_tgt:INTERPROCEDURAL_OPTIMIZATION" title="INTERPROCEDURAL_OPTIMIZATION"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">INTERPROCEDURAL_OPTIMIZATION</span></code></a> target property is enabled and
produce an error if flags are not known to CMake for the current compiler.
Since a given compiler may not support IPO flags in all environments in which
it is used, it is now the project's responsibility to use the
<span class="target" id="index-0-module:CheckIPOSupported"><!--f--></span><a class="reference internal" href="module/CheckIPOSupported.html#module:CheckIPOSupported" title="CheckIPOSupported"><code class="xref cmake cmake-module docutils literal notranslate"><span class="pre">CheckIPOSupported</span></code></a> module to check for support before enabling the
<span class="target" id="index-2-prop_tgt:INTERPROCEDURAL_OPTIMIZATION"><!--f--></span><a class="reference internal" href="prop_tgt/INTERPROCEDURAL_OPTIMIZATION.html#prop_tgt:INTERPROCEDURAL_OPTIMIZATION" title="INTERPROCEDURAL_OPTIMIZATION"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">INTERPROCEDURAL_OPTIMIZATION</span></code></a> target property.  This approach
allows a project to conditionally activate IPO when supported.  It also
allows an end user to set the <span class="target" id="index-0-variable:CMAKE_INTERPROCEDURAL_OPTIMIZATION"><!--f--></span><a class="reference internal" href="variable/CMAKE_INTERPROCEDURAL_OPTIMIZATION.html#variable:CMAKE_INTERPROCEDURAL_OPTIMIZATION" title="CMAKE_INTERPROCEDURAL_OPTIMIZATION"><code class="xref cmake cmake-variable docutils literal notranslate"><span class="pre">CMAKE_INTERPROCEDURAL_OPTIMIZATION</span></code></a>
variable in an environment known to support IPO even if the project does
not enable the property.</p>
<p>Since CMake 3.8 and lower only honored <span class="target" id="index-3-prop_tgt:INTERPROCEDURAL_OPTIMIZATION"><!--f--></span><a class="reference internal" href="prop_tgt/INTERPROCEDURAL_OPTIMIZATION.html#prop_tgt:INTERPROCEDURAL_OPTIMIZATION" title="INTERPROCEDURAL_OPTIMIZATION"><code class="xref cmake cmake-prop_tgt docutils literal notranslate"><span class="pre">INTERPROCEDURAL_OPTIMIZATION</span></code></a>
for the Intel compiler on Linux, some projects may unconditionally enable the
target property.  Policy <code class="docutils literal notranslate"><span class="pre">CMP0069</span></code> provides compatibility with such projects.</p>
<p>This policy takes effect whenever the IPO property is enabled.  The <code class="docutils literal notranslate"><span class="pre">OLD</span></code>
behavior for this policy is to add IPO flags only for Intel compiler on Linux.
The <code class="docutils literal notranslate"><span class="pre">NEW</span></code> behavior for this policy is to add IPO flags for the current
compiler or produce an error if CMake does not know the flags.</p>
<p>This policy was introduced in CMake version 3.9.  CMake version
 warns when the policy is not set and uses <code class="docutils literal notranslate"><span class="pre">OLD</span></code> behavior.
Use the <span class="target" id="index-0-command:cmake_policy"><!--f--></span><a class="reference internal" href="command/cmake_policy.html#command:cmake_policy" title="cmake_policy"><code class="xref cmake cmake-command docutils literal notranslate"><span class="pre">cmake_policy()</span></code></a> command to set it to <code class="docutils literal notranslate"><span class="pre">OLD</span></code> or <code class="docutils literal notranslate"><span class="pre">NEW</span></code>
explicitly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">OLD</span></code> behavior of a policy is
<span class="target" id="index-0-manual:cmake-policies(7)"><!--f--></span><a class="reference internal" href="https://cmake.org/cmake/help/v3.24/manual/cmake-policies.7.html#manual:cmake-policies(7)" title="cmake-policies(7)"><code class="xref cmake cmake-manual docutils literal notranslate"><span class="pre">deprecated</span> <span class="pre">by</span> <span class="pre">definition</span></code></a>
and may be removed in a future version of CMake.</p>
</div>
<section id="examples">
<h2>Examples</h2>
<p>Behave like CMake 3.8 and do not apply any IPO flags except for Intel compiler
on Linux:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">cmake_minimum_required(</span><span class="no">VERSION</span><span class="w"> </span><span class="m">3.8</span><span class="nf">)</span><span class="w"></span>
<span class="nf">project(</span><span class="nb">foo</span><span class="nf">)</span><span class="w"></span>

<span class="c"># ...</span>

<span class="nf">set_property(</span><span class="no">TARGET</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="no">PROPERTY</span><span class="w"> </span><span class="no">INTERPROCEDURAL_OPTIMIZATION</span><span class="w"> </span><span class="no">TRUE</span><span class="nf">)</span><span class="w"></span>
</pre></div>
</div>
<p>Use the <span class="target" id="index-1-module:CheckIPOSupported"><!--f--></span><a class="reference internal" href="module/CheckIPOSupported.html#module:CheckIPOSupported" title="CheckIPOSupported"><code class="xref cmake cmake-module docutils literal notranslate"><span class="pre">CheckIPOSupported</span></code></a> module to detect whether IPO is
supported by the current compiler, environment, and CMake version.
Produce a fatal error if support is not available:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">cmake_minimum_required(</span><span class="no">VERSION</span><span class="w"> </span><span class="m">3.9</span><span class="nf">)</span><span class="w"> </span><span class="c"># CMP0069 NEW</span>
<span class="nf">project(</span><span class="nb">foo</span><span class="nf">)</span><span class="w"></span>

<span class="nf">include(</span><span class="nb">CheckIPOSupported</span><span class="nf">)</span><span class="w"></span>
<span class="nf">check_ipo_supported()</span><span class="w"></span>

<span class="c"># ...</span>

<span class="nf">set_property(</span><span class="no">TARGET</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="no">PROPERTY</span><span class="w"> </span><span class="no">INTERPROCEDURAL_OPTIMIZATION</span><span class="w"> </span><span class="no">TRUE</span><span class="nf">)</span><span class="w"></span>
</pre></div>
</div>
<p>Apply IPO flags only if compiler supports it:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">cmake_minimum_required(</span><span class="no">VERSION</span><span class="w"> </span><span class="m">3.9</span><span class="nf">)</span><span class="w"> </span><span class="c"># CMP0069 NEW</span>
<span class="nf">project(</span><span class="nb">foo</span><span class="nf">)</span><span class="w"></span>

<span class="nf">include(</span><span class="nb">CheckIPOSupported</span><span class="nf">)</span><span class="w"></span>

<span class="c"># ...</span>

<span class="nf">check_ipo_supported(</span><span class="no">RESULT</span><span class="w"> </span><span class="nb">result</span><span class="nf">)</span><span class="w"></span>
<span class="nf">if(</span><span class="nb">result</span><span class="nf">)</span><span class="w"></span>
<span class="w">  </span><span class="nf">set_property(</span><span class="no">TARGET</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="no">PROPERTY</span><span class="w"> </span><span class="no">INTERPROCEDURAL_OPTIMIZATION</span><span class="w"> </span><span class="no">TRUE</span><span class="nf">)</span><span class="w"></span>
<span class="nf">endif()</span><span class="w"></span>
</pre></div>
</div>
<p>Apply IPO flags without any checks.  This may lead to build errors if IPO
is not supported by the compiler in the current environment.  Produce an
error if CMake does not know IPO flags for the current compiler:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nf">cmake_minimum_required(</span><span class="no">VERSION</span><span class="w"> </span><span class="m">3.9</span><span class="nf">)</span><span class="w"> </span><span class="c"># CMP0069 NEW</span>
<span class="nf">project(</span><span class="nb">foo</span><span class="nf">)</span><span class="w"></span>

<span class="c"># ...</span>

<span class="nf">set_property(</span><span class="no">TARGET</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="no">PROPERTY</span><span class="w"> </span><span class="no">INTERPROCEDURAL_OPTIMIZATION</span><span class="w"> </span><span class="no">TRUE</span><span class="nf">)</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>

            
          </div>
      </div>
    </div>
  </body>
</html>