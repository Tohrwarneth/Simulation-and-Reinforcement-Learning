<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>clang-tidy - openmp-use-default-none</title>
	/* CLION CLANG-TIDY DOCUMENTATION CSS PLACEHOLDER */
  </head>
  <body><div class="content"><section id="openmp-use-default-none">
<h1>openmp-use-default-none</h1>
<p>Finds OpenMP directives that are allowed to contain a <code class="docutils literal notranslate"><span class="pre">default</span></code> clause,
but either donâ€™t specify it or the clause is specified but with the kind
other than <code class="docutils literal notranslate"><span class="pre">none</span></code>, and suggests to use the <code class="docutils literal notranslate"><span class="pre">default(none)</span></code> clause.</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">default(none)</span></code> clause forces developers to explicitly specify data
sharing attributes for the variables referenced in the construct,
thus making it obvious which variables are referenced, and what is their
data sharing attribute, thus increasing readability and possibly making errors
easier to spot.</p>
<section id="example">
<h2>Example</h2>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// ``for`` directive cannot have ``default`` clause, no diagnostics.</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">n0</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="cp">#pragma omp for</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="n">b</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// ``parallel`` directive.</span>

<span class="c1">// ``parallel`` directive can have ``default`` clause, but said clause is not</span>
<span class="c1">// specified, diagnosed.</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">p0_0</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="cp">#pragma omp parallel</span>
<span class="w">  </span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// WARNING: OpenMP directive ``parallel`` does not specify ``default``</span>
<span class="w">  </span><span class="c1">//          clause. Consider specifying ``default(none)`` clause.</span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// ``parallel`` directive can have ``default`` clause, and said clause is</span>
<span class="c1">// specified, with ``none`` kind, all good.</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">p0_1</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="cp">#pragma omp parallel default(none)</span>
<span class="w">  </span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// ``parallel`` directive can have ``default`` clause, and said clause is</span>
<span class="c1">// specified, but with ``shared`` kind, which is not ``none``, diagnose.</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">p0_2</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="cp">#pragma omp parallel default(shared)</span>
<span class="w">  </span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// WARNING: OpenMP directive ``parallel`` specifies ``default(shared)``</span>
<span class="w">  </span><span class="c1">//          clause. Consider using ``default(none)`` clause instead.</span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// ``parallel`` directive can have ``default`` clause, and said clause is</span>
<span class="c1">// specified, but with ``firstprivate`` kind, which is not ``none``, diagnose.</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">p0_3</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="cp">#pragma omp parallel default(firstprivate)</span>
<span class="w">  </span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// WARNING: OpenMP directive ``parallel`` specifies ``default(firstprivate)``</span>
<span class="w">  </span><span class="c1">//          clause. Consider using ``default(none)`` clause instead.</span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
</div></body>
</html>