<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>clang-tidy - bugprone-misplaced-widening-cast</title>
	/* CLION CLANG-TIDY DOCUMENTATION CSS PLACEHOLDER */
  </head>
  <body><div class="content"><section id="bugprone-misplaced-widening-cast">
<h1>bugprone-misplaced-widening-cast</h1>
<p>This check will warn when there is a cast of a calculation result to a bigger
type. If the intention of the cast is to avoid loss of precision then the cast
is misplaced, and there can be loss of precision. Otherwise the cast is
ineffective.</p>
<p>Example code:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">long</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="p">)(</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The result <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">1000</span></code> is first calculated using <code class="docutils literal notranslate"><span class="pre">int</span></code> precision. If the
result exceeds <code class="docutils literal notranslate"><span class="pre">int</span></code> precision there is loss of precision. Then the result is
casted to <code class="docutils literal notranslate"><span class="pre">long</span></code>.</p>
<p>If there is no loss of precision then the cast can be removed or you can
explicitly cast to <code class="docutils literal notranslate"><span class="pre">int</span></code> instead.</p>
<p>If you want to avoid loss of precision then put the cast in a proper location,
for instance:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">long</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<section id="implicit-casts">
<h2>Implicit casts</h2>
<p>Forgetting to place the cast at all is at least as dangerous and at least as
common as misplacing it. If <a class="reference internal" href="#cmdoption-arg-CheckImplicitCasts"><code class="xref std std-option docutils literal notranslate"><span class="pre">CheckImplicitCasts</span></code></a> is enabled the check
also detects these cases, for instance:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">long</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="floating-point">
<h2>Floating point</h2>
<p>Currently warnings are only written for integer conversion. No warning is
written for this code:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">10.0f</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="options">
<h2>Options</h2>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-arg-CheckImplicitCasts">
<span id="cmdoption-arg-checkimplicitcasts"></span><span class="sig-name descname"><span class="pre">CheckImplicitCasts</span></span><span class="sig-prename descclassname"></span></dt>
<dd><p>If <cite>true</cite>, enables detection of implicit casts. Default is <cite>false</cite>.</p>
</dd></dl>

</section>
</section>
</div></body>
</html>